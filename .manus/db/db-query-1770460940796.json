{
  "query": "\n-- 멤버십 플랜 테이블\nCREATE TABLE IF NOT EXISTS membershipPlans (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  name VARCHAR(50) NOT NULL UNIQUE,\n  monthlyPrice INT NOT NULL,\n  discountRate DECIMAL(5, 2) DEFAULT 0,\n  freeShipping BOOLEAN DEFAULT FALSE,\n  benefits JSON,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  INDEX idx_name (name)\n);\n\n-- 사용자 멤버십 테이블\nCREATE TABLE IF NOT EXISTS userMemberships (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  userId INT NOT NULL UNIQUE,\n  planId INT NOT NULL,\n  subscriptionStatus ENUM('active', 'paused', 'cancelled') DEFAULT 'active',\n  subscriptionId VARCHAR(255),\n  startDate TIMESTAMP NOT NULL,\n  renewalDate TIMESTAMP NOT NULL,\n  cancelledAt TIMESTAMP,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (userId) REFERENCES users(id) ON DELETE CASCADE,\n  FOREIGN KEY (planId) REFERENCES membershipPlans(id),\n  INDEX idx_userId (userId),\n  INDEX idx_subscriptionStatus (subscriptionStatus)\n);\n\n-- 멤버십 결제 이력 테이블\nCREATE TABLE IF NOT EXISTS membershipPayments (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  userMembershipId INT NOT NULL,\n  amount INT NOT NULL,\n  status ENUM('pending', 'paid', 'failed') DEFAULT 'pending',\n  paymentKey VARCHAR(255),\n  paidAt TIMESTAMP,\n  failedAt TIMESTAMP,\n  failureReason VARCHAR(255),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (userMembershipId) REFERENCES userMemberships(id) ON DELETE CASCADE,\n  INDEX idx_userMembershipId (userMembershipId),\n  INDEX idx_status (status)\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 416sKAyoYAY7t9i.root --database Mn9Dg9rESodT4uw3HctnZ9 --execute \n-- 멤버십 플랜 테이블\nCREATE TABLE IF NOT EXISTS membershipPlans (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  name VARCHAR(50) NOT NULL UNIQUE,\n  monthlyPrice INT NOT NULL,\n  discountRate DECIMAL(5, 2) DEFAULT 0,\n  freeShipping BOOLEAN DEFAULT FALSE,\n  benefits JSON,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  INDEX idx_name (name)\n);\n\n-- 사용자 멤버십 테이블\nCREATE TABLE IF NOT EXISTS userMemberships (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  userId INT NOT NULL UNIQUE,\n  planId INT NOT NULL,\n  subscriptionStatus ENUM('active', 'paused', 'cancelled') DEFAULT 'active',\n  subscriptionId VARCHAR(255),\n  startDate TIMESTAMP NOT NULL,\n  renewalDate TIMESTAMP NOT NULL,\n  cancelledAt TIMESTAMP,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,\n  FOREIGN KEY (userId) REFERENCES users(id) ON DELETE CASCADE,\n  FOREIGN KEY (planId) REFERENCES membershipPlans(id),\n  INDEX idx_userId (userId),\n  INDEX idx_subscriptionStatus (subscriptionStatus)\n);\n\n-- 멤버십 결제 이력 테이블\nCREATE TABLE IF NOT EXISTS membershipPayments (\n  id INT PRIMARY KEY AUTO_INCREMENT,\n  userMembershipId INT NOT NULL,\n  amount INT NOT NULL,\n  status ENUM('pending', 'paid', 'failed') DEFAULT 'pending',\n  paymentKey VARCHAR(255),\n  paidAt TIMESTAMP,\n  failedAt TIMESTAMP,\n  failureReason VARCHAR(255),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (userMembershipId) REFERENCES userMemberships(id) ON DELETE CASCADE,\n  INDEX idx_userMembershipId (userMembershipId),\n  INDEX idx_status (status)\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 2749
}